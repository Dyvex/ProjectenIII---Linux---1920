# servers.yml
---
# Configure server alfa1 with LDAP role
- name: Configure alfa1
  hosts: alfa1
  become: true
  remote_user: root
  roles:
    - LDAP
    - cloudalchemy.node-exporter

# Configure bravo 1 (also known as the primary or master DNS server) with DNS BIND
#
- name: Configure bravo1
  hosts: bravo1
  remote_user: root
  gather_facts: yes
  roles:
    - dnsBindBravoCharlie
    - cloudalchemy.node-exporter

# Configure charlie 1 (also known as the secondary, backup or slave dns server) with DNS BIND      
- name: Configure charlie1
  gather_facts: yes
  hosts: charlie1
  remote_user: root
  roles:
    - dnsBindBravoCharlie
    - cloudalchemy.node-exporter

- hosts: november1
  become: true
  gather_facts: yes
  roles: 
    - mariadb-server
#    - cloudalchemy.node-exporter

- name: Configure Delta1
  hosts: delta1
  become: true
  roles:
    - bertvv.rh-base
    - sepolicy
    - bertvv.httpd
    - bertvv.mailserver
    - bertvv.squirrelmail
    - cloudalchemy.node-exporter

#Echo1
- hosts: echo1
  become: true
  roles:
    - common
    - nginx
   # - echo1
    - cloudalchemy.node-exporter

#Kilo1
- hosts: kilo1
  become: true
  roles:
    - kilo1-dhcp
    - cloudalchemy.node-exporter

#Mike1
- hosts: mike1
  become: true
  roles:
    - common
    - cloudalchemy.node-exporter
  # - mike1

# Configure oscar 1: monitoring server
#
#- hosts: oscar1
#  become: true
#  gather_facts: yes
#  roles:
#  - cloudalchemy.prometheus
#  - cloudalchemy.grafana

- hosts: oscar1
  become: true
  gather_facts: yes
  roles:
  - cloudalchemy.prometheus
  - cloudalchemy.grafana
  - cloudalchemy.node-exporter
  - jdauphant.dns

- hosts: papa1
  become: true
  roles: 
    - papa1-pxeserver
    - cloudalchemy.node-exporter
#- hosts: papa1
#  become: true
#  roles: 
#    - papa1-pxeserver
